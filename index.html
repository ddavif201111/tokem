<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        /* –ü–û–í–ù–ï –ë–õ–û–ö–£–í–ê–ù–ù–Ø –°–ö–†–û–õ–£ –¢–ê –ñ–ï–°–¢–Ü–í */
        html, body { 
            margin: 0; padding: 0; width: 100vw; height: 100vh; 
            overflow: hidden; background: #000; color: #fff;
            font-family: sans-serif; position: fixed; touch-action: none;
        }

        #app { display: flex; flex-direction: column; height: 100%; width: 100%; align-items: center; }

        .header { padding: 20px; font-size: 40px; font-weight: 900; color: #f3ba2f; z-index: 10; pointer-events: none; }

        /* –ó–æ–Ω–∞ –∫–ª—ñ–∫—É –Ω–∞ –≤–µ—Å—å —Ü–µ–Ω—Ç—Ä –µ–∫—Ä–∞–Ω–∞ */
        #click-zone { 
            flex: 1; width: 100%; display: flex; align-items: center; 
            justify-content: center; position: relative; z-index: 5;
        }

        #coin { 
            width: 260px; height: 260px; border-radius: 50%; 
            border: 8px solid #f3ba2f; display: flex; align-items: center; 
            justify-content: center; font-size: 120px; background: #111;
            transition: transform 0.05s; pointer-events: none; /* –©–æ–± –∫–ª—ñ–∫ –ø—Ä–æ—Ö–æ–¥–∏–≤ –∫—Ä—ñ–∑—å –∫–∞—Ä—Ç–∏–Ω–∫—É –Ω–∞ –∑–æ–Ω—É */
        }

        .pop {
            position: absolute; color: #f3ba2f; font-size: 40px; font-weight: 900;
            pointer-events: none; animation: fly 0.5s ease-out forwards;
        }

        @keyframes fly { 0% { opacity: 1; transform: translateY(0); } 100% { opacity: 0; transform: translateY(-100px); } }

        .footer { padding: 20px; width: 100%; text-align: center; z-index: 10; pointer-events: none; }
    </style>
</head>
<body>

<div id="app">
    <div class="header" id="balance">0</div>
    
    <div id="click-zone">
        <div id="coin">üêº</div>
    </div>

    <div class="footer">
        ‚ö° <span id="energy">1000</span> / 1000
    </div>
</div>

<script>
    const tg = window.Telegram.WebApp;
    tg.ready();
    tg.expand();

    let coins = Number(localStorage.getItem('c')) || 0;
    let energy = 1000;
    const balanceEl = document.getElementById('balance');
    const energyEl = document.getElementById('energy');
    const coinEl = document.getElementById('coin');
    const zone = document.getElementById('click-zone');

    function update() {
        balanceEl.innerText = coins.toLocaleString();
        energyEl.innerText = energy;
        localStorage.setItem('c', coins);
    }

    // –†–ï–ê–ö–¶–Ü–Ø –ù–ê –ë–£–î–¨-–Ø–ö–ò–ô –¢–ê–ü –£ –ó–û–ù–Ü
    function handle(e) {
        if (energy > 0) {
            coins += 1;
            energy -= 1;

            // –ï—Ñ–µ–∫—Ç –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—è
            coinEl.style.transform = 'scale(0.9)';
            setTimeout(() => coinEl.style.transform = 'scale(1)', 50);

            // –ê–Ω—ñ–º–∞—Ü—ñ—è —Ü–∏—Ñ—Ä–∏ (+1)
            const x = e.touches ? e.touches[0].clientX : e.clientX;
            const y = e.touches ? e.touches[0].clientY : e.clientY;
            const p = document.createElement('div');
            p.className = 'pop'; p.innerText = '+1';
            p.style.left = x + 'px'; p.style.top = y + 'px';
            document.body.appendChild(p);
            setTimeout(() => p.remove(), 500);

            if (tg.HapticFeedback) tg.HapticFeedback.impactOccurred('medium');
            update();
        }
    }

    // –í—ñ—à–∞—î–º–æ –ø–æ–¥—ñ—é –Ω–∞ –≤—Å—é —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—É –∑–æ–Ω—É
    zone.addEventListener('touchstart', (e) => {
        e.preventDefault(); // –ö–†–ò–¢–ò–ß–ù–û: –≤–∏–º–∏–∫–∞—î —Å–∫—Ä–æ–ª –±–æ—Ç–∞
        handle(e);
    }, { passive: false });

    zone.addEventListener('mousedown', handle);

    update();
</script>
</body>
</html>
