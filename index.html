<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        /* –ü–û–í–ù–ê –ó–ê–ë–û–†–û–ù–ê –†–£–•–£ –ï–ö–†–ê–ù–£ */
        html, body { 
            margin: 0; padding: 0; width: 100vw; height: 100vh; 
            overflow: hidden; background: #000; color: #fff;
            position: fixed; touch-action: none; -webkit-user-select: none;
        }

        #app { display: flex; flex-direction: column; height: 100%; align-items: center; justify-content: center; }

        #balance { font-size: 50px; font-weight: 900; color: #f3ba2f; margin-bottom: 20px; }

        /* –í–µ–ª–∏–∫–∞ –∫–Ω–æ–ø–∫–∞ –ü–∞–Ω–¥–∏ */
        #coin { 
            width: 280px; height: 280px; border-radius: 50%; 
            border: 10px solid #f3ba2f; display: flex; align-items: center; 
            justify-content: center; font-size: 130px; background: #111;
            transition: transform 0.05s; cursor: pointer;
            box-shadow: 0 0 30px rgba(243,186,47,0.3);
        }

        .pop {
            position: absolute; color: #f3ba2f; font-size: 40px; font-weight: 900;
            pointer-events: none; animation: fly 0.5s ease-out forwards; z-index: 100;
        }
        @keyframes fly { 0% { opacity: 1; transform: translateY(0); } 100% { opacity: 0; transform: translateY(-120px); } }

        .info { margin-top: 30px; font-size: 20px; font-weight: bold; }
    </style>
</head>
<body>

<div id="app">
    <div id="balance">0</div>
    
    <div id="coin" onclick="handleTap(event)">üêº</div>

    <div class="info">‚ö° –ï–Ω–µ—Ä–≥—ñ—è: <span id="energy">1000</span></div>
</div>

<script>
    const tg = window.Telegram.WebApp;
    tg.ready();
    tg.expand();

    let coins = Number(localStorage.getItem('c')) || 0;
    let energy = 1000;

    function update() {
        document.getElementById('balance').innerText = coins.toLocaleString();
        document.getElementById('energy').innerText = energy;
        localStorage.setItem('c', coins);
    }

    // –ù–ê–ô–ü–†–û–°–¢–Ü–®–ê –§–£–ù–ö–¶–Ü–Ø –ö–õ–Ü–ö–£
    function handleTap(e) {
        if (energy > 0) {
            coins += 1;
            energy -= 1;

            // –ï—Ñ–µ–∫—Ç —Å—Ç–∏—Å–∫–∞–Ω–Ω—è
            const coin = document.getElementById('coin');
            coin.style.transform = 'scale(0.9)';
            setTimeout(() => coin.style.transform = 'scale(1)', 50);

            // –í–∏–ª—ñ—Ç–∞—é—á–∞ —Ü–∏—Ñ—Ä–∞
            const x = e.clientX || (e.touches ? e.touches[0].clientX : 0);
            const y = e.clientY || (e.touches ? e.touches[0].clientY : 0);
            
            const p = document.createElement('div');
            p.className = 'pop'; p.innerText = '+1';
            p.style.left = x + 'px'; p.style.top = y + 'px';
            document.body.appendChild(p);
            setTimeout(() => p.remove(), 500);

            // –í—ñ–±—Ä–∞—Ü—ñ—è
            if (tg.HapticFeedback) tg.HapticFeedback.impactOccurred('medium');
            
            update();
        }
    }

    // –î–ª—è –Ω–∞–¥—ñ–π–Ω–æ—Å—Ç—ñ –Ω–∞ –º–æ–±—ñ–ª—å–Ω–∏—Ö:
    document.getElementById('coin').addEventListener('touchstart', function(e) {
        e.preventDefault(); // –ó—É–ø–∏–Ω—è—î–º–æ —Å–∫—Ä–æ–ª
        handleTap(e.touches[0]);
    }, { passive: false });

    update();
</script>
</body>
</html>
